<div class="home-page">
    <!-- Top Toolbar -->
    <div class="home-toolbar">
        <app-virtual-explorer-toolbar [currentPath]="currentPath" [canGoBack]="canGoBack" [canGoForward]="canGoForward"
            [isPreloadComplete]="loading" [availableDrives]="availableDrives" (back)="onBack()" (forward)="onForward()"
            (refresh)="onRefresh()" (searchQuery)="onSearch($event)" (pathChanged)="onPathChange($event)"
            (driveChanged)="onDriveChange($event)">
        </app-virtual-explorer-toolbar>
    </div>

    <div class="actual-content">
        <div class="main-container" [ngClass]="{'with-sidebar': selectedFile}">
            <!-- Sidebar: Virtual File Info Sidebar -->
            <app-virtual-file-info-sidebar *ngIf="selectedFile && !selectedFile.isDirectory"
                [selectedFile]="selectedFile" (openModalEvent)="onFileModalOpen($event)"
                (modelUpdated)="onModelUpdated($event)" (closed)="selectedFile = null">
            </app-virtual-file-info-sidebar>

            <!-- File List Container -->
            <div class="file-list-container">
                <div *ngIf="loading" class="loading">Loading files...</div>
                <div *ngIf="!loading">
                    <app-virtual-file-list [items]="virtualItems" [viewMode]="viewMode"
                        (fileSelected)="selectedFile = $event" (openFolder)="onPathChange($event)">
                    </app-virtual-file-list>
                </div>
            </div>
        </div>
    </div>

    <!-- (Optional) Modal Component -->
    <app-virtual-model-modal *ngIf="selectedModelVersion" [modelVersion]="selectedModelVersion"
        (close)="selectedModelVersion = null">
    </app-virtual-model-modal>
</div>